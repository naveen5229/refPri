<nb-card>
    <nb-card-header>
        <div class="row">
            <div class="col-10">

                <h5>Tasks</h5>

            </div>
            <div class="col text-right">
                <button class="btn btn-primary text-capitalize" id="button" (click)="assignTask()"><i
                        class="fa fa-plus"></i></button> </div>

        </div>


    </nb-card-header>
    <nb-card>
        <nb-card-body>
            <div class="tabs_style_main">
                <ul class="tabs_style text-left">
                    <li [ngClass]="activeTab=='Assign Task'?'active':''" (click)="activeTab='Assign Task'; getTask()">My Tasks
                    </li>
                    <li [ngClass]="activeTab=='Assigned By Me'?'active':''" (click)="activeTab='Assigned By Me'; getTask()">
                        Assigned Tasks</li>
                    <li [ngClass]="activeTab=='Waiting For Review'?'active':''" (click)="activeTab='Waiting For Review'; getTask()">Waiting For Review</li>

                    <li [ngClass]="activeTab=='Review But Change'?'active':''" (click)="activeTab='Review But Change'; getTask()">
                        Review But Change</li>
                    <li [ngClass]="activeTab=='Pending Review'?'active':''" (click)="activeTab='Pending Review'; getTask()">
                        Pending Review</li>
                    <li [ngClass]="activeTab=='Completed Task'?'active':''" (click)="activeTab='Completed Task'; getTask()">
                        Completed Task</li>
                </ul>

            </div>
            <!-- <div class="row mt-1">
                <div class="col-2 text-right">
                    <button class="btn btn-primary text-capitalize" id="button" (click)="assignTask()">Review List</button> </div>
                <div class="col-2 text-right">
                    <button class="btn btn-primary text-capitalize" id="button" (click)="assignTask()">Assign Task</button> </div>
            </div> -->
            <div *ngIf="activeTab=='Assign Task'">

                <table class="table table-border mt-1">
                    <thead class="thead">
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Project</th>
                            <th>Module</th>
                            <th>Assigner</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th>Action</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of taskList; let i=index;">
                            <td>0{{i+1}}</td>
                            <td>{{task.Title| titlecase}}</td>
                            <td>{{task.Description |titlecase}}</td>
                            <td>{{task.ProjectName |titlecase }}</td>
                            <td>{{task.ModuleName | titlecase}}</td>
                            <td>{{task.AssignerName | titlecase }}</td>
                            <td>{{task.assign_time | date :'dd MMM yyyy hh:mm a '}}</td>
                            <td>{{task.review_time | date :'dd MMM yyyy hh:mm a ' }}</td>
                            <td><abbr title="Waiting for review  then click it"><i class="fas fa-check"
                                (click)="waitingForReview(task)"></i></abbr>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>

            <div *ngIf="activeTab=='Completed Task'">
                <table class="table table-border mt-1">
                    <thead class="thead">
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Project</th>
                            <th>Module</th>
                            <th>Assigner</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of complateTask; let i=index;">
                            <td>0{{i+1}}</td>
                            <td>{{task.Title| titlecase}}</td>
                            <td>{{task.Description | titlecase}}</td>
                            <td>{{task.ProjectName |titlecase }}</td>
                            <td>{{task.ModuleName | titlecase}}</td>
                            <td>{{task.AssignerName | titlecase }}</td>
                            <td>{{task.assign_time |date :'dd MMM yyyy hh:mm a ' }}</td>
                            <td>{{task.review_time | date :'dd MMM yyyy hh:mm a ' }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="activeTab=='Assigned By Me'">
                <table class="table table-border mt-1">
                    <thead class="thead">
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Project</th>
                            <th>Module</th>
                            <th>Assigned</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th>Action</th>


                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of assigned ; let i=index;">
                            <td>0{{i+1}}</td>
                            <td>{{task.Title| titlecase}}</td>
                            <td>{{task.Description | titlecase}}</td>
                            <td>{{task.ProjectName |titlecase }}</td>
                            <td>{{task.ModuleName| titlecase}}</td>
                            <td>{{task.AssigneeName | titlecase }}</td>
                            <td>{{task.assign_time | date :'dd MMM yyyy hh:mm a ' }}</td>
                            <td>{{task.review_time | date :'dd MMM yyyy hh:mm a ' }}</td>

                            <div *ngIf="task.status==0">
                                <td><i class="far fa-edit" (click)=" editTask(task)"></i><i class="fas fa-trash-alt" (click)="deleteTask(task)"></i></td>
                            </div>
                            <div *ngIf="task.status==1">
                                <td><i class="far fa-edit" (click)=" editTask(task)"></i></td>
                            </div>
                            <div *ngIf="task.status==-1">
                                <td><i class="far fa-edit" (click)=" editTask(task)"></i><i class="fas fa-trash-alt" (click)="deleteTask(task)"></i></td>
                            </div>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="activeTab=='Waiting For Review'">
                <table class="table table-border mt-1">
                    <thead class="thead">
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Project</th>
                            <th>Module</th>
                            <th>Assigner</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of review ; let i=index;">
                            <td>0{{i+1}}</td>
                            <td>{{task.Title| titlecase}}</td>
                            <td>{{task.Description |titlecase}}</td>
                            <td>{{task.ProjectName |titlecase }}</td>
                            <td>{{task.ModuleName | titlecase}}</td>
                            <td>{{task.AssignerName | titlecase }}</td>
                            <td>{{task.assign_time | date :'dd MMM yyyy hh:mm a '}}</td>
                            <td>{{task.review_time | date :'dd MMM yyyy hh:mm a ' }}</td>
                            <!-- <td><i class="fas fa-eye" (click)="reviewTask(task)"></i> -->
                            <!-- </td> -->




                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="activeTab=='Review But Change'">
                <table class="table table-border mt-1">
                    <thead class="thead">
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Project</th>
                            <th>Module</th>
                            <th>Assigner</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th>Remark</th>
                            <th>Action</th>



                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of changeReview; let i=index;">
                            <td>0{{i+1}}</td>
                            <td>{{task.Title| titlecase}}</td>
                            <td>{{task.Description|titlecase }}</td>
                            <td>{{task.ProjectName |titlecase }}</td>
                            <td>{{task.ModuleName | titlecase}}</td>
                            <td>{{task.AssignerName | titlecase }}</td>
                            <td>{{task.assign_time | date :'dd MMM yyyy hh:mm a '}}</td>
                            <!-- <td><i class="far fa-edit" (click)="editTask(task)"></i><i class="fas fa-trash-alt" (click)="deleteTask(task)"></i>
                            </td> -->
                            <td>{{task.review_time | date :'dd MMM yyyy hh:mm a ' }}</td>
                            <td>{{task.review_remark | titlecase}}</td>
                            <td><abbr title="Check and Change then click it"><i class="fas  fa-check"
                                    (click)="waitingForReview(task)"></i></abbr>
                            </td>


                        </tr>
                    </tbody>
                </table>
            </div>
            <div *ngIf="activeTab=='Pending Review'">

                <table class="table table-border mt-1">
                    <thead class="thead">
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Project</th>
                            <th>Module </th>
                            <th>Assigned</th>
                            <th>Start Time</th>
                            <th>Status</th>
                            <th>Remark</th>
                            <th>End Time</th>
                            <th>Action</th>



                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let task of pendingReview ; let i=index;">
                            <td>0{{i+1}}</td>
                            <td>{{task.Title| titlecase}}</td>
                            <td>{{task.Description | titlecase}}</td>
                            <td>{{task.ProjectName |titlecase }}</td>
                            <td>{{task.ModuleName | titlecase}}</td>
                            <td>{{task.AssigneeName | titlecase }}</td>
                            <td>{{task.assign_time | date :'dd MMM yyyy hh:mm a '}}</td>
                            <td> <select class="form-control" name="taskStatus" [(ngModel)]="task.status">
                                    <option value="a">Select Status</option>
                                    <option value="2">Completed</option>
                                    <option value="-1">Review But Change</option>
                                    <option value="-2">Reject</option>

                                </select></td>
                            <td><textarea row="2" cols="15" [(ngModel)]="task.remark" class="form-control"></textarea>
                            </td>
                            <td>
                                <uj-date-time-picker (onChanged)="task.review_time=$event" [dateTimeValue]="task.review_time" [isTime]="true" [isStart]="true"> </uj-date-time-picker>
                            </td>
                            <td><button class="btn btn-primary text-capitalize" id="button" (click)="statusChangeRemark(task)">Submit</button>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </nb-card-body>

    </nb-card>