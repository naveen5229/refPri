<nb-card>
  <nb-card-header>
    <div class="row">
      <div class="col-4">
        <h5 class="heading-design">Graphical Reports</h5>
      </div>
      <div class="col-5">
        <span style="display: flex;">
          <auto-suggestion class="form-controls col-9 p-0 searchselect" [data]="processList" display="name"
            placeholder="Search Process" inputId="ProcessSearch" name="ProcessSearch" #searchedProcess>
          </auto-suggestion>
          <button class="btn btn-primary btn-sm"
            (click)="getSideBarData(searchedProcess.selectedSuggestion)">Search</button>
        </span>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <div class="row mt-2 centarize">
      <div class="col-1 hoverChart" *ngFor="let image of chartTypes;let i = index"
        (click)="active = image.id;getChartofType(image.type);selectedChart = image.type">
        <span>
          <img src="{{image.url}}" height="80px" width="80px" [ngClass]="active==image.id?'active':''">
        </span>
      </div>
    </div>
    <div class="row mr-0">
      <div class="col-2 sidenavleft p-0">
        <div *ngFor="let data of sideBarData">
          <h6>{{data.title}}</h6>
          <ul *ngIf="data.children && data.children.length >0" class="child-ul">
            <li class="top" *ngFor="let head of data.children;let i = index" style="font-weight:bold"
              (click)="onHideShow(head,i)">
              <!--(click)="head.children? head.hideMe = !head.hideMe: head.hideMe = head.hideMe"-->
              <p class="drophead">{{head.title}} <span class="dropcaret"><i class="fas fa-sort-down"
                    style="cursor: pointer"></i></span></p>
              <ul *ngIf="head.isHide" id="unassign" cdkDropList [cdkDropListData]="head.children"
                [cdkDropListConnectedTo]="['assignDataRow','assignDataColumn']" class="child-ul innerdrop"
                (cdkDropListDropped)="drop($event)" [cdkDropListEnterPredicate]="noReturnPredicate">
                <li class="drag-list" *ngFor="let sub of head.children;let i = index" cdkDrag>
                  {{sub.r_coltitle}}
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-10">
        <div class="row mt-2">
          <div class="col-2 text-right"><label> X-Axis:</label> </div>
          <div id="assignDataRow" cdkDropList [cdkDropListData]="assign.data.x" cdkDropListConnectedTo="menuList"
            class="col-10 drag-container" (cdkDropListDropped)="drop($event)">
            <div class="example-box fieldStyle" *ngFor="let n of assign.data.x;let i =index" cdkDrag [cdkDragData]="n">
              {{n.r_coltitle}}
              <i class="far fa-times-circle cancelButtonCss" (click)="removeField(i,'x')"></i>
            </div>
          </div>
        </div>
        <div class="row mt-2">
          <div class="col-2 text-right"><label>Y-Axis:</label> </div>
          <div id="assignDataColumn" cdkDropList [cdkDropListData]="assign.data.y" cdkDropListConnectedTo="menuList"
            class="col-10 drag-container" (cdkDropListDropped)="drop($event)">
            <div class="example-box fieldStyle" *ngFor="let n of assign.data.y;let i =index" cdkDrag [cdkDragData]="n">
              {{n.r_coltitle}}
              <i class="far fa-times-circle cancelButtonCss" (click)="removeField(i,'y')"></i>
              <select class="selectInsideSelected" (change)="addMeasure(i,'y',$event.target.value)">
                <!-- <option disabled selected>measure</option> -->
                <option>Date</option>
                <option selected>Count</option>
                <option>Average</option>
                <option>Sum</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row mt-2" style="text-align: right;">
          <div class="col-12">
            <button class="btn btn-primary margin_right">Save</button>
            <button class="btn btn-primary" (click)="getReportPreview()">Preview</button>
          </div>
        </div>
        <div class="row mt-2">
          <div class="col-12">
            <div class="chartbox">
              <canvas id="Graph"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nb-card-body>
</nb-card>